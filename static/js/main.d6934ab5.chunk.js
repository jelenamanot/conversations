(this.webpackJsonpconversations=this.webpackJsonpconversations||[]).push([[0],{177:function(t,e,n){},330:function(t,e,n){"use strict";n.r(e);var r=n(6),a=n(0),c=n.n(a),s=n(24),i=n.n(s),o=(n(177),n(103)),u=n(29),l=n(49),j=n(169),d=n(13),p=n(3),b="CONVERSATION_GET_REQUEST",O="CONVERSATION_GET_SUCCESS",v="CONVERSATION_GET_FAILURE",f="CONVERSATION_GET_BY_ID_REQUEST",x="CONVERSATION_GET_BY_ID_SUCCESS",g="CONVERSATION_GET_BY_ID_FAILURE",h="CONVERSATION_POST_MESSAGE_REQUEST",m="CONVERSATION_POST_MESSAGE_SUCCESS",y="CONVERSATION_POST_MESSAGE_FAILURE",_={conversations:[],messages:[],error:null,isLoading:!1,currentConversationId:null};var w={getConversations:function(){return{type:b}},getConversationById:function(t){return{type:f,id:t}},postMessage:function(t){return{type:h,content:t}}},C="USER_GET_REQUEST",E="USER_GET_SUCCESS",S="USER_GET_FAILURE",I={user:{},error:null,isLoading:!1};var T={getUser:function(){return{type:C}}},U=Object(l.c)({conversation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:case h:return Object(p.a)(Object(p.a)({},t),{},{isLoading:!0});case f:return Object(p.a)(Object(p.a)({},t),{},{isLoading:!0,currentConversationId:e.id});case O:return Object(p.a)(Object(p.a)({},t),{},{conversations:e.conversations,isLoading:_.isLoading,error:null});case x:return Object(p.a)(Object(p.a)({},t),{},{messages:e.messages,isLoading:_.isLoading,error:null});case m:return Object(p.a)(Object(p.a)({},t),{},{isLoading:_.isLoading,messages:[].concat(Object(d.a)(t.messages),[e.newMessage]),error:null});case v:case g:case y:return Object(p.a)(Object(p.a)({},t),{},{error:e.error,isLoading:_.isLoading});default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case C:return Object(p.a)(Object(p.a)({},t),{},{isLoading:!0});case E:return Object(p.a)(Object(p.a)({},t),{},{user:e.user,isLoading:I.isLoading,error:null});case S:return Object(p.a)(Object(p.a)({},t),{},{error:e.error,isLoading:I.isLoading});default:return t}}}),L=function(t,e){return U(t,e)},k=n(9),N=n.n(k),R=n(26),A=n(48),M=n(76),G=n.n(M),V="https://csjar37r18.execute-api.eu-central-1.amazonaws.com/dev",P={primaryColor:"#4344A7"};function D(){return(D=Object(A.a)(N.a.mark((function t(){var e;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.a.get("".concat(V,"/conversations"));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function F(){return(F=Object(A.a)(N.a.mark((function t(e){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.a.get("".concat(V,"/conversations/").concat(e,"/messages"));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function B(){return(B=Object(A.a)(N.a.mark((function t(e,n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.a.post("".concat(V,"/conversations/").concat(e,"/messages"),{content:n});case 3:return r=t.sent,t.abrupt("return",r.data);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var $={getConversations:function(){return D.apply(this,arguments)},getConversationMessages:function(t){return F.apply(this,arguments)},postMessage:function(t,e){return B.apply(this,arguments)}},z=N.a.mark(J),Q=N.a.mark(X),Y=N.a.mark(q),H=N.a.mark(K);function J(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(R.b)($.getConversations);case 3:return t=e.sent,e.next=6,Object(R.c)({type:O,conversations:t});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(R.c)({type:v,error:e.t0});case 12:case"end":return e.stop()}}),z,null,[[0,8]])}function X(t){var e;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(R.b)($.getConversationMessages,t.id);case 3:return e=n.sent,n.next=6,Object(R.c)({type:x,messages:e});case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(R.c)({type:g,error:n.t0});case 12:case"end":return n.stop()}}),Q,null,[[0,8]])}function q(t){var e,n,r,a,c;return N.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(R.d)((function(t){return t.conversation}));case 3:return e=s.sent,n=e.currentConversationId,s.next=7,Object(R.d)((function(t){return t.user}));case 7:return r=s.sent,a=r.user,s.next=11,Object(R.b)($.postMessage,n,t.content);case 11:return c=s.sent,s.next=14,Object(R.c)({type:m,newMessage:Object(p.a)(Object(p.a)({},c),{},{participant:a,created_at:new Date})});case 14:s.next=20;break;case 16:return s.prev=16,s.t0=s.catch(0),s.next=20,Object(R.c)({type:y,error:s.t0});case 20:case"end":return s.stop()}}),Y,null,[[0,16]])}function K(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)([Object(R.e)(b,J),Object(R.e)(f,X),Object(R.e)(h,q)]);case 2:case"end":return t.stop()}}),H)}function W(){return(W=Object(A.a)(N.a.mark((function t(){var e;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.a.get("".concat(V,"/user"));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var Z={getUser:function(){return W.apply(this,arguments)}},tt=N.a.mark(nt),et=N.a.mark(rt);function nt(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(R.b)(Z.getUser);case 3:return t=e.sent,e.next=6,Object(R.c)({type:E,user:t});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(R.c)({type:S,error:e.t0});case 12:case"end":return e.stop()}}),tt,null,[[0,8]])}function rt(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)([Object(R.e)(C,nt)]);case 2:case"end":return t.stop()}}),et)}var at=N.a.mark(ct);function ct(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)([K(),rt()]);case 2:case"end":return t.stop()}}),at)}var st=Object(j.a)(),it=Object(l.a)(st);it=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d)(it);var ot=Object(l.e)((function(t,e){return L(t,e)}),it);st.run(ct);var ut=ot,lt=(n(200),n(10)),jt=n(334),dt=n(64),pt=n(340),bt=n(35),Ot=n(341);function vt(){var t=Object(bt.a)(["\n\tcolor: white;\n\tfont-style: bold;\n\tmargin-left: 10px;\n"]);return vt=function(){return t},t}function ft(){var t=Object(bt.a)(["\n\tcolor: white;\n\tmargin: 0;\n"]);return ft=function(){return t},t}function xt(){var t=Object(bt.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tbackground-color: ",";\n"]);return xt=function(){return t},t}var gt=Object(u.c)(Ot.a.Header)(xt(),(function(t){return t.theme.primaryColor})),ht=u.c.h1(ft()),mt=u.c.span(vt()),yt=function(t){var e=t.user,n="".concat(e.first_name," ").concat(e.last_name);return Object(r.jsxs)(gt,{children:[Object(r.jsx)(ht,{children:"Conversations"}),Object(r.jsxs)(dt.a,{title:"Your profile",children:[Object(r.jsx)(pt.a,{src:e.avatar_url,alt:n}),Object(r.jsx)(mt,{children:n})]})]})},_t=n(337);function wt(){var t=Object(bt.a)(["\n\tmargin: 8px 8px 8px 0;\n\tborder-radius: 5px;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 20px;\n\tbackground-color: white;\n\tcursor: pointer;\n\tborder-left-width: 5px;\n\tborder-left-style: solid;\n\tborder-left-color: ",";\n\n\t& > .ant-avatar {\n\t\tmargin-right: 15px;\n\t}\n\n\t@media (max-width: 992px) {\n\t\t.ant-typography {\n\t\t\tfont-size: 12px;\n\t\t}\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.ant-typography {\n\t\t\tdisplay: none;\n\t\t}\n\t\t.ant-avatar {\n\t\t\tmargin-right: 0;\n\t\t}\n\t}\n"]);return wt=function(){return t},t}function Ct(){var t=Object(bt.a)(["\n\theight: 85vh;\n\toverflow-y: auto;\n\twidth: 25%;\n"]);return Ct=function(){return t},t}var Et=u.c.div(Ct()),St=u.c.div(wt(),(function(t){var e=t.isCurrent,n=t.theme;return e?n.primaryColor:"white"})),It=function(t){var e=t.conversations,n=t.onClick,a=t.loggedUserId,c=t.currentConversationId;return Object(r.jsx)(Et,{children:e.map((function(t){var e=t.participants.filter((function(t){return t.id!==a}))[0],s=t.id===c,i="".concat(e.first_name," ").concat(e.last_name);return Object(r.jsxs)(St,{onClick:function(){return n(t.id,e)},isCurrent:s,children:[Object(r.jsx)(pt.a,{src:e.avatar_url,alt:i}),Object(r.jsx)(_t.a.Text,{strong:!0,children:i})]},t.id)}))})},Tt=n(336),Ut=n(339),Lt=n(80),kt=n(333);function Nt(){var t=Object(bt.a)(["\n\tcolor: ",";\n"]);return Nt=function(){return t},t}function Rt(){var t=Object(bt.a)(["\n\t\t\tmargin: 6px 0 6px 51%;\n\t\t\tbackground-color: ",";\n\t\t"]);return Rt=function(){return t},t}function At(){var t=Object(bt.a)(["\n\tpadding: 0 10px;\n\tmargin: 6px 51% 6px 0;\n\tborder-radius: 8px;\n\tbackground-color: white;\n\n\t",";\n"]);return At=function(){return t},t}function Mt(){var t=Object(bt.a)(["\n\theight: 55vh;\n\toverflow-y: auto;\n"]);return Mt=function(){return t},t}var Gt=u.c.div(Mt()),Vt=Object(u.c)(kt.a)(At(),(function(t){var e=t.$isUser,n=t.theme;return e&&Object(u.b)(Rt(),n.primaryColor)})),Pt=u.c.p(Nt(),(function(t){return t.$isUser?"white":"black"})),Dt=function(t){var e=t.messages,n=t.loggedUserId,a=c.a.useRef(null);return c.a.useEffect((function(){a.current.scrollIntoView({behavior:"smooth"})}),[e]),Object(r.jsxs)(Gt,{children:[e.length?Object(r.jsx)("div",{children:e.map((function(t){var e=t.participant,a=t.created_at,c=t.content,s="".concat(e.first_name," ").concat(e.last_name),i=e.id===n;return Object(r.jsx)(Vt,{$isUser:i,author:Object(r.jsx)(Pt,{$isUser:i,children:s}),avatar:Object(r.jsx)(pt.a,{src:e.avatar_url,alt:s}),content:Object(r.jsx)(Pt,{$isUser:i,children:c}),datetime:Object(r.jsx)(dt.a,{title:Object(Tt.a)(new Date(a),"yyyy-MM-dd HH:mm:ss"),children:Object(Ut.a)(new Date(a))})},t.id)}))}):Object(r.jsx)(Lt.a,{description:"Please choose conversation"}),Object(r.jsx)("div",{ref:a})]})};Dt.defaultProps={loggedUserId:null};var Ft=Dt,Bt=n(335),$t=n(338),zt=function(t){var e=t.user,n=(t.isLoading,t.onClick),a=c.a.useState(""),s=Object(lt.a)(a,2),i=s[0],o=s[1];return Object(r.jsx)(kt.a,{avatar:Object(r.jsx)(pt.a,{src:e.avatar_url,alt:e.first_name}),content:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Bt.a.Item,{children:Object(r.jsx)($t.a.TextArea,{rows:4,onChange:function(t){return o(t.target.value)},value:i,placeholder:"Type your message..."})}),Object(r.jsx)(Bt.a.Item,{children:Object(r.jsx)("button",{className:"ant-btn ant-btn-primary",onClick:function(){n(i),o("")},disabled:!i,children:"Send"})})]})})},Qt=n(342),Yt=n(343),Ht=n(344);function Jt(){var t=Object(bt.a)(["\n\t& > span {\n\t\tfont-size: 20px;\n\t\tmargin-right: 20px;\n\t}\n"]);return Jt=function(){return t},t}function Xt(){var t=Object(bt.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\n\t& > .ant-avatar {\n\t\tmargin: 10px;\n\t}\n\n\t& > .ant-typography {\n\t\tmargin: 0;\n\t}\n"]);return Xt=function(){return t},t}function qt(){var t=Object(bt.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tborder-bottom: 1px solid lightgrey;\n\tpadding: 0 5px 0 0;\n\tjustify-content: space-between;\n"]);return qt=function(){return t},t}var Kt=u.c.div(qt()),Wt=u.c.div(Xt()),Zt=u.c.div(Jt()),te=function(t){var e=t.participant,n="".concat(e.first_name," ").concat(e.last_name);return Object(r.jsxs)(Kt,{children:[Object(r.jsxs)(Wt,{children:[Object(r.jsx)(pt.a,{size:60,src:e.avatar_url,alt:n}),Object(r.jsx)(_t.a.Title,{level:3,children:n})]}),Object(r.jsxs)(Zt,{children:[Object(r.jsx)(dt.a,{title:"Add to friends",children:Object(r.jsx)(Qt.a,{})}),Object(r.jsx)(dt.a,{title:"Add to favorites",children:Object(r.jsx)(Yt.a,{})}),Object(r.jsx)(dt.a,{title:"Notify me",children:Object(r.jsx)(Ht.a,{})})]})]})};te.defaultProps={participant:{}};var ee=te;function ne(){var t=Object(bt.a)(["\n\twidth: 100%;\n\tmargin: 0 20px;\n"]);return ne=function(){return t},t}function re(){var t=Object(bt.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 20px 50px;\n"]);return re=function(){return t},t}function ae(){var t=Object(bt.a)(["\n\theight: 100vh;\n"]);return ae=function(){return t},t}var ce=Object(u.c)(Ot.a)(ae()),se=Object(u.c)(Ot.a.Content)(re()),ie=u.c.div(ne()),oe=function(t){var e=t.getConversations,n=t.getConversationById,a=t.conversations,s=t.messages,i=t.isLoading,o=t.user,u=t.getUser,l=t.postMessage,j=t.currentConversationId,d=c.a.useState({}),p=Object(lt.a)(d,2),b=p[0],O=p[1];c.a.useEffect((function(){u(),e()}),[u,e]);return Object(r.jsxs)(ce,{children:[Object(r.jsx)(yt,{user:o}),Object(r.jsxs)(se,{children:[Object(r.jsx)(It,{conversations:a,onClick:function(t,e){n(t),O(e)},loggedUserId:o.id,currentConversationId:j}),Object(r.jsx)(ie,{children:Object(r.jsxs)(jt.a,{spinning:i,children:[s.length?Object(r.jsx)(ee,{participant:b}):null,Object(r.jsx)(Ft,{messages:s,loggedUserId:o.id}),s.length?Object(r.jsx)(zt,{isLoading:i,user:o,onClick:function(t){l(t)}}):null]})})]})]})};oe.defaultProps={currentConversationId:null};var ue=oe,le=Object(o.b)((function(t){var e=t.conversation,n=e.conversations,r=e.messages,a=e.isLoading,c=e.currentConversationId;return{conversations:n,messages:r,isLoading:a,user:t.user.user,currentConversationId:c}}),(function(t){return Object(l.b)(Object(p.a)(Object(p.a)({},w),T),t)}))(ue),je=function(){return Object(r.jsx)(o.a,{store:ut,children:Object(r.jsx)(u.a,{theme:P,children:Object(r.jsx)(le,{})})})},de=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,345)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(je,{})}),document.getElementById("root")),de()}},[[330,1,2]]]);
//# sourceMappingURL=main.d6934ab5.chunk.js.map